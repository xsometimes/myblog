


目的：
- 赋予更新任务的优先级，而不是盲目每次更新到调和漆，
- 可以暂停，在下一帧恢复

让react可以在16ms内更好地控制任务渲染的时间


fiber需要实现的特性：
- 为不同类型的任务赋予优先级
- 任务的暂停与恢复
- 若任务不再需要，可以中止
- 复用之前已完成的工作

实现这些特性的挑战之一是，js引擎的工作方式，还有在语言中缺乏对线程的支持。




```js
const fiber = createFiberFromTypeAndProps(
    type,
    key,
    pendingProps,
    owner,
    mode,
    lanes,
  );

  // 多了lanes，少了expirationTime
  // 少了effectTag

  /**
   * 少了effectTag
   * 我们把不能在render阶段完成的一些work称为副作用，React罗列了可能存在的各类副作用，用effectTag标记
  */
```



```js
// ReactWorkTags.js
export const ScopeComponent = 21;
export const OffscreenComponent = 22;
export const CacheComponent = 24;
```