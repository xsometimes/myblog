<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>仿射变换 | Passerby&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="">
    <link rel="preload" href="/myblog/assets/css/0.styles.9e02c2dd.css" as="style"><link rel="preload" href="/myblog/assets/js/app.841cf2fe.js" as="script"><link rel="preload" href="/myblog/assets/js/2.09b68ebe.js" as="script"><link rel="preload" href="/myblog/assets/js/4.b1026715.js" as="script"><link rel="prefetch" href="/myblog/assets/js/10.35807b11.js"><link rel="prefetch" href="/myblog/assets/js/11.7ddcdaf0.js"><link rel="prefetch" href="/myblog/assets/js/12.33491707.js"><link rel="prefetch" href="/myblog/assets/js/13.7b9d8c58.js"><link rel="prefetch" href="/myblog/assets/js/14.b8dd00de.js"><link rel="prefetch" href="/myblog/assets/js/15.001b6ba7.js"><link rel="prefetch" href="/myblog/assets/js/16.f7156e65.js"><link rel="prefetch" href="/myblog/assets/js/17.6010eea9.js"><link rel="prefetch" href="/myblog/assets/js/18.ab2db88e.js"><link rel="prefetch" href="/myblog/assets/js/19.35360913.js"><link rel="prefetch" href="/myblog/assets/js/20.78d7ed3f.js"><link rel="prefetch" href="/myblog/assets/js/21.8a623f99.js"><link rel="prefetch" href="/myblog/assets/js/22.af783801.js"><link rel="prefetch" href="/myblog/assets/js/23.3d16dc5e.js"><link rel="prefetch" href="/myblog/assets/js/24.18546582.js"><link rel="prefetch" href="/myblog/assets/js/25.daa1a30f.js"><link rel="prefetch" href="/myblog/assets/js/26.0f929b51.js"><link rel="prefetch" href="/myblog/assets/js/27.6b265dc5.js"><link rel="prefetch" href="/myblog/assets/js/28.938db891.js"><link rel="prefetch" href="/myblog/assets/js/3.cbf223b2.js"><link rel="prefetch" href="/myblog/assets/js/5.d0c44171.js"><link rel="prefetch" href="/myblog/assets/js/6.f7e71090.js"><link rel="prefetch" href="/myblog/assets/js/7.c6de86cd.js"><link rel="prefetch" href="/myblog/assets/js/8.5ca4c3fb.js"><link rel="prefetch" href="/myblog/assets/js/9.30bb8d75.js">
    <link rel="stylesheet" href="/myblog/assets/css/0.styles.9e02c2dd.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/myblog/" class="home-link router-link-active"><!----> <span class="site-name">Passerby's Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><!----> <!---->  <ul class="sidebar-links"><li><a href="/myblog/pages/9d73aa/" class="sidebar-link">react hooks学习笔记</a></li><li><a href="/myblog/pages/e12590/" class="sidebar-link">indexedDB 学习</a></li><li><a href="/myblog/pages/0429b9/" class="sidebar-link">geojson</a></li><li><a href="/myblog/pages/420644/" class="sidebar-link">调度器设计：eventloop、异步更新等相关</a></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-33863c7e><div class="articleInfo" data-v-33863c7e><ul class="breadcrumbs" data-v-33863c7e><li data-v-33863c7e><a href="/myblog/" title="首页" class="iconfont icon-home router-link-active" data-v-33863c7e></a></li> <li data-v-33863c7e><a href="/myblog/categories/?category=%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0" title="分类" data-v-33863c7e>学习笔记</a></li> <!----> <!----></ul> <div class="info" data-v-33863c7e><!----> <div title="创建时间" class="date iconfont icon-riqi" data-v-33863c7e><a href="javascript:;" data-v-33863c7e>2021-05-20</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">
          仿射变换
        </h1> <!----> <div class="theme-vdoing-content content__default"><p>简单的笔记。详细可见月影大佬的<a href="https://time.geekbang.org/column/article/259264" target="_blank" rel="noopener noreferrer">09 | 如何用仿射变换对几何图形进行坐标变换？（from 跟月影学可视化）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>仿射变换是拓扑学和图形学中一个非常重要的基础概念。利用它，我们才能在可视化应用中快速绘制出形态、位置、大小各异的众多几何图形。所以，这一节课，我们就来说一说仿射变换的数学基础和基本操作，它几乎会被应用到我们后面讲到的所有视觉呈现的案例中，所以你一定要掌握。</p> <h2 id="什么是仿射变换"><a href="#什么是仿射变换" class="header-anchor">#</a> 什么是仿射变换？</h2> <p>仿射变换简单来说就是“线性变换 + 平移”。实际上在平常的 Web 开发中，我们也经常会用到仿射变换，比如，对元素设置 CSS 的 transform 属性就是对元素应用仿射变换。</p> <p>再说回到几何图形，针对它的仿射变换具有以下 2 个性质：</p> <ul><li>仿射变换前是直线段的，仿射变换后依然是直线段</li> <li>对两条直线段 a 和 b 应用同样的仿射变换，变换前后线段长度比例保持不变</li></ul> <p>由于仿射变换具有这两个性质，因此对线性空间中的几何图形进行仿射变换，就相当于对它的每个顶点向量进行仿射变换。那具体怎么操作呢？下面，我们就来详细说说。</p> <h3 id="_1-1-向量的平移、旋转与缩放"><a href="#_1-1-向量的平移、旋转与缩放" class="header-anchor">#</a> 1.1 向量的平移、旋转与缩放</h3> <p>常见的仿射变换形式包括<strong>平移、旋转、缩放</strong>以及它们的组合。</p> <ol><li><strong>平移变换</strong>是最简单的仿射变换。如果我们想让向量 P(x0, y0) 沿着向量 Q(x1, y1) 平移，只要将 P 和 Q 相加就可以了。</li></ol> <p align="center"><img src="/myblog/assets/img/20210529001.3b1afc9f.jpeg" alt="20210529001"></p> <ol start="2"><li><strong>旋转变换</strong>。我们在第 5 课接触过，当时我们把向量的旋转定义成了如下的函数：</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Vector2D</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>  
  <span class="token function">rotate</span><span class="token punctuation">(</span><span class="token parameter">rad</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> c <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>rad<span class="token punctuation">)</span><span class="token punctuation">,</span>
      s <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>rad<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x <span class="token operator">*</span> c <span class="token operator">+</span> y <span class="token operator">*</span> <span class="token operator">-</span>s<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> x <span class="token operator">*</span> s <span class="token operator">+</span> y <span class="token operator">*</span> c<span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>但是，我们并没有讨论这个函数是怎么来的，那在这里我们通过三角函数来简单推导一下。</p> <p align="center"><img src="/myblog/assets/img/20210529002.914ad44e.jpeg" alt="20210529002"></p> <p>假设向量 P 的长度为 r，角度是⍺，现在我们要将它逆时针旋转⍬角，此时新的向量 P’的参数方程为：</p> <p align="center"><img src="/myblog/assets/img/20210529003.7383bf5a.jpeg" alt="20210529003"></p> <p>然后，因为 rcos⍺、rsin⍺是向量 P 原始的坐标 x0、y0，所以，我们可以把坐标代入到上面的公式中，就会得到如下的公式：
</p><p align="center"><img src="/myblog/assets/img/20210529004.88aea778.jpeg" alt="20210529004"></p><p></p> <p>最后，我们再将它写成矩阵形式，就会得到一个旋转矩阵。至于为什么要写成矩阵形式，我后面会讲，这里你先记住这个旋转矩阵的公式就可以了。</p> <p align="center"><img src="/myblog/assets/img/20210529005.e52cae61.jpeg" alt="20210529005"></p> <ol start="3"><li><strong>缩放变换</strong>。以直接让向量与标量（标量只有大小、没有方向）相乘。</li></ol> <p align="center"><img src="/myblog/assets/img/20210529006.46d1bb8b.jpeg" alt="20210529006"></p> <p>对于得到的这个公式，我们也可以把它写成矩阵形式。结果如下：</p> <p align="center"><img src="/myblog/assets/img/20210529007.2b15e082.jpg" alt="20210529007"></p> <p>现在，我们就得到了三个基本的仿射变换公式，其中旋转和缩放都可以写成矩阵与向量相乘的形式。这种能写成矩阵与向量相乘形式的变换，就叫做<strong>线性变换</strong>。线性变换除了可以满足仿射变换的 2 个性质之外，还有 2 个额外的性质：</p> <ul><li>线性变换不改变坐标原点（因为如果 x0、y0等于零，那么 x、y 肯定等于 0）；</li> <li>线性变换可以叠加，多个线性变换的叠加结果就是将线性变换的矩阵依次相乘，再与原始向量相乘。</li></ul> <p>那根据线性变换的第 2 条性质，我们就能总结出一个通用的线性变换公式，即一个原始向量 P0经过 M1、M2、…Mn 次的线性变换之后得到最终的坐标 P。线性变化的叠加是一个非常重要的性质，它是我们对图形进行变换的基础，所以你一定要牢记线性变化的叠加性质。</p> <p align="center"><img src="/myblog/assets/img/20210529008.deca8b0b.jpeg" alt="20210529008"></p> <p>好了，常见的仿射变换形式我们说完了。总的来说，向量的基本仿射变换分为平移、旋转与缩放，其中旋转与缩放属于线性变换，而平移不属于线性变换。基于此，我们可以得到仿射变换的一般表达式，如下图所示：</p> <p align="center"><img src="/myblog/assets/img/20210529009.c275c765.jpg" alt="20210529009"></p> <h3 id="_1-2-仿射变换的公式优化"><a href="#_1-2-仿射变换的公式优化" class="header-anchor">#</a> 1.2 仿射变换的公式优化</h3> <p>上面这个公式我们还可以改写成矩阵的形式，在改写的公式里，我们实际上是给线性空间增加了一个维度。换句话说，我们用高维度的线性变换表示了低维度的仿射变换！</p> <p align="center"><img src="/myblog/assets/img/20210529010.53e134ca.jpeg" alt="20210529010"></p> <p>这样，我们就将原本 n 维的坐标转换为了 n+1 维的坐标。这种 n+1 维坐标被称为<strong>齐次坐标</strong>，对应的矩阵就被称为<strong>齐次矩阵</strong>。</p> <p>齐次坐标和齐次矩阵是可视化中非常常用的数学工具，它能让我们用线性变换来表示仿射变换。这样一来，我们就能利用线性变换的叠加性质，来非常方便地进行各种复杂的仿射变换了。落实到共识上，就是把这些变换的矩阵相乘得到一个新的矩阵，再把它乘以原向量。我们在绘制几何图形的时候会经常用到它，所以你要记住这个公式。</p> <h2 id="css的仿射变换"><a href="#css的仿射变换" class="header-anchor">#</a> Css的仿射变换</h2> <p>既然我们讲了仿射变换，这里还是要再提一下 CSS 中我们常用的属性 transform。</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">div.block</span> <span class="token punctuation">{</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>30deg<span class="token punctuation">)</span> <span class="token function">translate</span><span class="token punctuation">(</span>100px<span class="token punctuation">,</span>50px<span class="token punctuation">)</span> <span class="token function">scale</span><span class="token punctuation">(</span>1.5<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>CSS 中的 transform 是一个很强大的属性，它的作用其实也是对元素进行仿射变换。它不仅支持 translate、rotate、scale 等值，还支持 matrix。CSS 的 matrix 是一个简写的齐次矩阵，因为它省略了 3 阶齐次矩阵第三行的 0, 0, 1 值，所以它 只有 6 个值。</p> <p align="center"><img src="/myblog/assets/img/20210529011.5e18daef.jpeg" alt="20210529011"></p> <p>这里我就不再自己写矩阵乘法的库了，我们用一个向量矩阵运算的数学库 math，它几乎包含了所有图形学需要用到的数学方法，我们在后面课程中也会经常用到它，你可以参考<a href="https://github.com/akira-cn/graphics/tree/master/common/lib/math" target="_blank" rel="noopener noreferrer">GitHub仓库<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 先了解一下它。</p> <p>我们简单算一下三个矩阵相乘，代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>
<span class="token keyword">import</span> <span class="token punctuation">{</span>multiply<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'common/lib/math/functions/mat3fun.js'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> rad <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">6</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token punctuation">[</span>
  Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>rad<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">-</span>Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>rad<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span>
  Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>rad<span class="token punctuation">)</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>rad<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span>
  <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span>
  <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> c <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token number">1.5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1.5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">multiply</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> b<span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*
[1.299038105676658, -0.7499999999999999, 61.60254037844388, 
  0.7499999999999999, 1.299038105676658, 93.30127018922192,
  0, 0, 1]
*/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>所以呢，我们最终就可以将上面的 transform 用一个矩阵表示：</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code>
<span class="token selector">div.block</span> <span class="token punctuation">{</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">matrix</span><span class="token punctuation">(</span>1.3<span class="token punctuation">,</span>0.75<span class="token punctuation">,</span>-0.75<span class="token punctuation">,</span>1.3<span class="token punctuation">,</span>61.6<span class="token punctuation">,</span>93.3<span class="token punctuation">)</span>；
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>这样的 transform 效果和之前 rotate、translate 和 scale 分开写的效果是一样的，但是字符数更少，所以能减小 CSS 文件的大小。</p></div></div> <!----> <div class="page-edit"><!----> <div class="tags"><a href="/myblog/tags/?tag=%E6%95%B0%E5%AD%A6" title="标签">#数学</a></div> <!----></div> <div class="page-nav-wapper"><!----> <!----></div></div> <div class="article-list"><div class="article-title"><a href="/myblog/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/myblog/pages/238ba6/"><div>3D图形学 之 Matrix</div></a> <span>05-30</span></dt></dl><dl><dd>02</dd> <dt><a href="/myblog/pages/9e1888/"><div>Three.js开发指南</div></a> <span>05-02</span></dt></dl><dl><dd>03</dd> <dt><a href="/myblog/pages/964380/"><div>react hooks实践：my-plan</div></a> <span>04-20</span></dt></dl> <dl><dd></dd> <dt><a href="/myblog/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><!----> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2020-2021
    <span>passerby | <a href="https://github.com/xugaoyi/vuepress-theme-vdoing/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">跟随系统</li><li class="iconfont icon-rijianmoshi">浅色模式</li><li class="iconfont icon-yejianmoshi">深色模式</li><li class="iconfont icon-yuedu">阅读模式</li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/myblog/assets/js/app.841cf2fe.js" defer></script><script src="/myblog/assets/js/2.09b68ebe.js" defer></script><script src="/myblog/assets/js/4.b1026715.js" defer></script>
  </body>
</html>